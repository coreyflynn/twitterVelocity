<!DOCTYPE html><html lang="en"><head><title>views/CMapFooterView</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../"><meta name="groc-document-path" content="views/CMapFooterView"><meta name="groc-project-path" content="source/views/CMapFooterView.js"><link rel="stylesheet" type="text/css" media="all" href="../assets/style.css"><script type="text/javascript" src="../assets/behavior.js"></script><body><div id="meta"><div class="file-path">source/views/CMapFooterView.js</div></div><div id="document"><div class="segment"><div class="comments"><div class="wrapper"><h1 id="cmapfooterview"><strong>CMapFooterView</strong></h1></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>A view that provides the standard Connectivity map page footer for apps built on apps.lincscloud.org
the view provides standard copyright text and customizable organization name,
terms and conditions link, and organization logo/link
basic use:</p></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><pre><code>header = new CMapHeaderView({el:"header_target"});
</code></pre></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>optional arguments:</p></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><ol>
<li>{string}  <strong>organization</strong>  the name of the organization that claims copyright. Defaults to <em>Broad Institute</em></li>
<li>{string}  <strong>terms_url</strong>  The url on which to find terms and conditions. Defaults to <em>http://lincscloud.org/terms-and-conditions/</em></li>
<li>{Array}  <strong>logo</strong>  The urls to organization logos to use. Defaults to <em>['http://coreyflynn.github.io/Bellhop/img/broad_logo_small.png','http://coreyflynn.github.io/Bellhop/img/cmap_logo_small.png']</em></li>
<li>{Array}  <strong>logo_url</strong>  The urls to organization links to use. Defaults to <em>['http://www.broadinstitute.org/','http://lincscloud.org/']</em></li>
<li>{string}  <strong>template</strong>  The path to a handlebars template to use. Defaults to <em>templates/CMapFooter.handlebars</em></li>
</ol></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><pre><code>header = new CMapFooterView({el:"footer_target", 
                            organization: "Broad Institute",
                            terms_url: "http://lincscloud.org/terms-and-conditions/",
                                logo: ['../img/broad_logo_small.png','../img/cmap_logo_small.png'],
                                logo_url: ['http://www.broadinstitute.org/','http://lincscloud.org/'],
                            template: "../templates/CMapFooter.handlebars"});
</code></pre></div></div><div class="code"><div class="wrapper"><span class="nx">Barista</span><span class="p">.</span><span class="nx">Views</span><span class="p">.</span><span class="nx">CMapFooterView</span> <span class="o">=</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span><span class="p">.</span><span class="nx">extend</span><span class="p">({</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="name">name</h3>

<p>give the view a name to be used throughout the View's functions when it needs to know what its class name is</p></div></div><div class="code"><div class="wrapper">  <span class="nx">name</span><span class="o">:</span> <span class="s2">&quot;CMapFooterView&quot;</span><span class="p">,</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="initialize">initialize</h3>

<p>overide the default Backbone.View initialize function to compile a built in template and then render the view</p></div></div><div class="code"><div class="wrapper">  <span class="nx">initialize</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>store passed parameters as attributes of the view</p></div></div><div class="code"><div class="wrapper">    <span class="k">this</span><span class="p">.</span><span class="nx">organization</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">organization</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">organization</span> <span class="o">:</span> <span class="s2">&quot;Broad Institute&quot;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">terms_url</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">terms_url</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">terms_url</span> <span class="o">:</span> <span class="s2">&quot;http://lincscloud.org/terms-and-conditions/&quot;</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">logo</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">logo</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">logo</span> <span class="o">:</span> <span class="p">[</span><span class="s1">&#39;http://coreyflynn.github.io/Bellhop/img/broad_logo_small.png&#39;</span><span class="p">,</span><span class="s1">&#39;http://coreyflynn.github.io/Bellhop/img/cmap_logo_small.png&#39;</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">logo_url</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">logo_url</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">logo_url</span> <span class="o">:</span> <span class="p">[</span><span class="s1">&#39;http://www.broadinstitute.org/&#39;</span><span class="p">,</span><span class="s1">&#39;http://lincscloud.org/&#39;</span><span class="p">];</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">template</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">template</span> <span class="o">!==</span> <span class="kc">undefined</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">template</span> <span class="o">:</span> <span class="s2">&quot;templates/CMapFooter.handlebars&quot;</span><span class="p">;</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>compile the default template for the view</p></div></div><div class="code"><div class="wrapper">    <span class="k">this</span><span class="p">.</span><span class="nx">compile_template</span><span class="p">();</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>render the template</p></div></div><div class="code"><div class="wrapper">    <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="p">},</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><h3 id="compile-template">compile_template</h3>

<p>use Handlebars to compile the specified template for the view</p></div></div><div class="code"><div class="wrapper">  <span class="nx">compile_template</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>grab the template</p></div></div><div class="code"><div class="wrapper">    <span class="k">this</span><span class="p">.</span><span class="nx">compiled_template</span> <span class="o">=</span> <span class="nx">BaristaTemplates</span><span class="p">.</span><span class="nx">CMapFooter</span><span class="p">;</span></div></div></div><div class="segment"><div class="comments"><div class="wrapper"><p>package logos and log_urls into a set of object to iterate over</p></div></div><div class="code"><div class="wrapper">    <span class="kd">var</span> <span class="nx">logo_objects</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">logo</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">){</span>
      <span class="nx">logo_objects</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">logo</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">logo</span><span class="p">[</span><span class="nx">i</span><span class="p">],</span> <span class="nx">url</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">logo_url</span><span class="p">[</span><span class="nx">i</span><span class="p">]});</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">$el</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">compiled_template</span><span class="p">({</span><span class="nx">organization</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">organization</span><span class="p">,</span>
                    <span class="nx">terms_url</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">terms_url</span><span class="p">,</span>
                    <span class="nx">logo_objects</span><span class="o">:</span> <span class="nx">logo_objects</span><span class="p">,</span>
                    <span class="nx">year</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">().</span><span class="nx">getFullYear</span><span class="p">()}));</span>
  <span class="p">}</span>
<span class="p">});</span></div></div></div></div></body></html>